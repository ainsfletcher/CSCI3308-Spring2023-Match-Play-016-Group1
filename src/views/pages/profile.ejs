<%- include ('../partials/head') %>
    <%- include ('../partials/menu') %>
        <div class="col"><%- include ('../partials/message') %></div>

        <main>

            <style>
                body {
                    background-image: url("https://wallpaper.dog/large/20516572.jpg");
                    background-repeat: no-repeat;
                    background-attachment: fixed;
                    background-size: 100% 100%;
                    font-family: 'Arial', sans-serif;
                }

                h2,
                h1 {
                    color: white;
                }

                .card-container {
                    margin: 0 auto;
                    max-width: 900px;
                    transition: height 0.5s ease-in-out;
                }

                .card {
                    background-color: gray;
                    border-radius: 20px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                    margin-bottom: 20px;
                    text-align: center;
                    height: auto;
                }

                .card-body {
                    background-color: gray;
                    padding: 20px;
                }

                /* input[type="text"] {
          border: 1px solid #c1c1c1;
          border-radius: 5px;
          padding: 5px;
          width: 100%;
        } */

                label {
                    display: block;
                    margin-bottom: 5px;
                }

                .btn-success {
                    background-color: #1f7a1f;
                    border-radius: 5px;
                    border: none;
                    color: #ffffff;
                    cursor: pointer;
                    font-size: 1rem;
                    margin-top: 10px;
                    padding: 10px 20px;
                    text-align: center;
                }

                .edit-button {
                    background-color: #1f7a1f;
                    border-radius: 5px;
                    border: none;
                    color: #ffffff;
                    cursor: pointer;
                    font-size: 1rem;
                    margin-top: 10px;
                    padding: 8px 10px;
                    text-align: center;
                    margin-bottom: 0;
                    padding-bottom: 0;
                }

                .info-label {
                    font-weight: bold;
                }

                .container {
                    max-width: 900px;
                    margin: 0 auto;
                }

                .button-container {
                    text-align: center;
                    margin-top: 10px;
                }
            </style>

            <main>
                <div class="container">
                    <br>
                    <div class="card-deck">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="col-lg-12 mb-4 mx-auto">
                                    <div class="card-container">
                                        <!-- First form content -->
                                        <div class="card text-white bg-success mb-3">
                                            <div class="card-body">
                                                <div class="container">
                                                    <h2> Welcome to matchPlay <%- results.name %>! </h2>
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Name</th>
                                                                <th scope="col">Handicap</th>
                                                                <th scope="col">Age</th>
                                                                <th scope="col">Home Course</th>
                                                                <th scope="col">Movement</th>
                                                                <th scope="col">Bio</th>
                                                                <th scope="col">Phone Number</th>
                                                                <th scope="col">User Image</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td><%- results.name %></td>
                                                                <td><%- results.handicap %></td>
                                                                <td><%- results.age %></td>
                                                                <td><%- results.home_course %></td>
                                                                <td><%- results.movement %></td>
                                                                <td><%- results.bio %></td>
                                                                <td><%- results.phone_number %></td>
                                                                <td><img src="<%- results.image_url %>"
                                                                        style="width:100px;height:100px;" alt="Upload your image below"></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <button class="edit-button" onclick="toggleEdit()">Edit</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card bg-light mb-3" id="card-edit" style="display:none;">
                                            <div class="card-body">
                                                <form action="/updateInfo" method="POST" autocomplete="off"
                                                    id="edit-form">
                                                    <p>
                                                        <label for="name">Name:</label>
                                                        <input class="w-100 border border-light rounded" type="text"
                                                            id="name" name="name" placeholder="Enter your name" />
                                                    </p>
                                                    <p>
                                                        <label for="handicap">Handicap:</label>
                                                        <input class="w-100 border border-light rounded" type="number"
                                                            id="handicap" name="handicap" max="54"
                                                            title="Max number of handicap is 54"
                                                            placeholder="Handicap max is 54" />
                                                    </p>
                                                    <p>
                                                        <label for="age">Age:</label>
                                                        <input class="w-100 border border-light rounded" type="number"
                                                            title="User age must be between 8 and 100"
                                                            id="age" name="age"
                                                            min="8" max="100"
                                                            placeholder="Enter your age" />
                                                    </p>
                                                    <p>
                                                        <label for="home_course">Home Course:</label>
                                                        <input class="w-100 border border-light rounded" type="text"
                                                            id="home_course" name="home_course"
                                                            placeholder="Enter Home Course" />
                                                    </p>
                                                    <p>
                                                        <label for="movement">Movement:</label>
                                                        <input class="w-100 border border-light rounded" type="text"
                                                            id="movement" name="movement"
                                                            placeholder="Prefer method of transportation" />
                                                    </p>
                                                    <p>
                                                        <label for="bio">Bio:</label>
                                                        <input class="w-100 border border-light rounded" type="text"
                                                            id="bio" name="bio" placeholder="Describe yourself fren!" />
                                                    </p>
                                                    <p>
                                                        <label for="phone_number">Phone Number:</label>
                                                        <input class="w-100 border border-light rounded" type="text"
                                                            id="phone_number" name="phone_number"
                                                            
                                                            placeholder="for example: 123456789">
                                                    </p>
                                                    <div class="button-container">
                                                        <button type="submit" class="btn btn-success">Update</button>
                                                        <button type="button" class="btn btn-secondary"
                                                            onclick="toggleEdit()">Cancel</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row"> <!-- Add a new row for the second form -->
                            <div class="col-lg-6 mb-4 mx-auto">
                                <div class="card-container">
                                    <div class="card bg-light mb-3">
                                        <div class="card-body">
                                            <form action="/upload" method="POST" enctype="multipart/form-data"></form>
                                            <p>
                                                <label for="profile_image">Profile Image:</label>
                                                <input type="file" id="profile_image" name="profile_image" />
                                                <label>Please use square images</label>
                                            </p>
                                            <div class="button-container">
                                                <button type="submit" class="btn btn-success"
                                                    onclick="fileHandler()">Update</button>
                                                <button type="button" class="btn btn-secondary"
                                                    onclick="toggleEdit()">Cancel</button>
                                            </div>
                                            </form>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- ... -->





            <%- include ('../partials/footer') %>

                <script>
                    function toggleEdit() {
                        var editForm = document.getElementById("card-edit");
                        if (editForm.style.display === "none") {
                            editForm.style.display = "block";
                        } else {
                            editForm.style.display = "none";
                        }
                    }

                    async function fileHandler() {
                        const filetest = document.getElementById("profile_image").files[0]
                        const data = new FormData()
                        data.append("name", filetest.name)
                        data.append('file', document.getElementById("profile_image").files[0])
                        console.log("######", filetest)
                        const response = await fetch('http://localhost:3000/upload', {
                            method: "POST",
                            body: data
                        })
                        const result = await response.json()
                        console.log("@@@@@@", result)
                    }
                </script>
